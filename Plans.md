# Plans

> 이 문서는 `Plans.json`에서 자동 생성되는 **MVP 6주 로드맵 문서(예시 명령 포함)** 입니다.
> 직접 수정하지 말고 `python scripts/plans_sync.py render --input Plans.json --output Plans.md`를 실행하세요.
> 테스트 명령은 즉시 실행 강제가 아닌 구현 단계 구체화를 위한 예시입니다.
> ⚠️ Phase 게이트 통과 전 다음 단계 진행 금지

## 1. 문서 목적
- **document_mode**: future_implementation_roadmap
- **horizon_weeks**: 6
- **main_objective**: PRD? AGENTS.md? ???? OCR-??-????-?? ????? MVP? ????, ?? ??? ??? ?? ???? ???? ???? ?? 30? ? ??? ??? ?? ??? ??? ????.
- **hard_gate_definition**: Hard Gate? ?? ?? ??? input_text_count == output_text_count, bbox_overflow == 0, min_font_pt >= 10? ?? ???? ??? ????.
- **tdd_execution_principle**: ???? ??? ????, ? ??? RED(?? ???) -> GREEN(?? ?? ??) -> REFACTOR(?? ??, ??? ??) ??? ?? ??? ???.

## 2. 테스트 전략
- **command_policy**: example_only

### 프레임워크
- **backend**: Pytest
- **e2e**: Playwright
- **frontend**: Vitest + Testing Library

### 원칙
- ?? ?? ?? ?? ?? ???? ?? ????, ?? ??? PRD ?? ??? 1:1? ????.
- ???? Acceptance Criteria? Edge Case? ??? ????, ???/??/??? ???? ??? ??? ????.
- GREEN ?? ??? ??? ??? ?? ?? ??? ????, ?? ?? ??? ????.
- REFACTOR ????? Router-Service-CRUD-Schema ?? ??? ???? ?? ??? ????, ?? ??? ??? ???? ??.
- E2E ???? ??? ?? ??(??? -> ZIP ??? -> ??? ?? -> ?? ???? -> ?? ? ???/??)? ??? ?? ???? ????.
- ?? ???? ??? ?? ??? ???? ???.
- ?? ? ??? ??? ?? ?? ??? ??? ?? ???? ???? ?? ????.

### 예시 테스트 명령
- `pytest tests/api/test_auth.py -q`
- `pytest tests/api/test_jobs_create.py -q`
- `pytest tests/worker/test_pipeline_hard_gate.py -q`
- `pytest tests/api/test_pages_retry.py -q`
- `pytest tests/api/test_error_app_codes.py -q`
- `pytest tests/integration/test_r2_storage.py -q`
- `pytest tests/integration/test_metrics_kpi.py -q`
- `npm run test -- src/features/upload/upload.spec.ts`
- `npm run test -- src/features/jobs/job-detail.spec.ts`
- `npm run test:e2e -- tests/e2e/user-journey.spec.ts`

### 임시 가정
- [???] ?? ???? package.json/??? ?? ??? ???? ?? Frontend ?? ??? ??? Vitest? ?? ????. ?? ?? ??.
- [???] ??? ?? ?? ??(?? ?, ??? ??)? PRD? ?? ??? ?? ??? ??? ? ?? ?? 90% ??? ????. ?? ?? ??.

## 3. 로드맵 진행

## Phase 1: Auth + Job ?? API ?? (Idempotency ??)
- **목표 기간**: W1
- **예상 소요 시간**: 4h
- **상태**: pending
- **목표**: ????/???/?? ??, ZIP ??? ? ?? ??, Idempotency-Key ?? ??? ??? ??? ?? ????.
- **완료 신호(게이트)**: Auth ?? ??? Jobs ?? API ??? ?? ??? ???? ???? app_code ??? ?????.

### 산출물/수용 기준
- Auth ??? ?? ??(signup/login/refresh/logout) ??
- ZIP ??? -> jobs/pages ?? ??? ??
- ?? API Idempotency-Key ??(?? ????? ??)

### 의존성
- ?? ?? ??? ? ?? ???? ?? ??
- ??/?? ?? ??(PRD, AGENTS) ??

### 주요 리스크
- ?? ?? ?? ???? API ??? ??? ? ??
- Idempotency ? ?? ?? ???? ??? ??? ??? ? ??

### 엣지 케이스 범위
- UNSUPPORTED_FILE_TYPE
- ARCHIVE_PARSE_FAILED
- MAX_PAGES_EXCEEDED
- IDEMPOTENCY_IN_PROGRESS

### 개발 원칙 체크리스트 (RED/GREEN/REFACTOR)
- [ ] **RED**: ?? ??? ??: test_create_job_requires_idempotency_key, test_upload_zip_rejects_unsupported_type, test_upload_zip_rejects_corrupted_archive
- [ ] **GREEN**: ?? ??: POST /jobs, ZIP ??? ??, jobs/pages ??, app_code ?? ??? ??? ??? ??
- [ ] **REFACTOR**: Router-Service-CRUD-Schema ?? ??, ?? ?? ?? ???, ?? ?? ?? ??(??? ??)

### 품질 게이트 (차단형)
- **blocking**: True
- **stop_message**: ?? ?? ??? ?? ? ?? Phase ?? ??

#### TDD 준수
- [ ] RED ???? ?? ???? ?? ????.
- [ ] GREEN ???? ?? ???? ???? ?????.
- [ ] REFACTOR ???? ???? ??? ? ??? ????.

#### 빌드/테스트
- [ ] ?? ?? ?? ??? ??? ????.
- [ ] ?? ?? ?? ????? ????.

#### 코드 품질
- [ ] ?? ?? ??? ?? ?? ??? ????.
- [ ] ?? ??? ??(Frontend any ??, Backend Pydantic)? ????.

#### 보안/성능
- [ ] ???? ???? ??? .env ?? ??? ????.
- [ ] ??/???? ??? ?? ?? ??? ????.

#### 문서화
- [ ] ??/??? ?? ??? ??? ????.
- [ ] ???? ??? ?????.

#### 수동 검증
- [ ] ?? ??? ????? ?? ????.
- [ ] ?? ?? ? ?? ???? ?? ????.

### 품질 게이트 검증 명령(예시)
- `python scripts/plans_sync.py validate --input Plans.json`
- `pytest tests/api/test_auth.py -q`
- `python scripts/plans_sync.py check --input Plans.json --output Plans.md`

### 예시 테스트 명령
- `pytest tests/api/test_auth.py -q`
- `pytest tests/api/test_jobs_create.py -q`
- `pytest tests/api/test_error_app_codes.py -q`

### 예상 결과 예시
- RED ?? ??: test_create_job_requires_idempotency_key ??(400/422 ???)? ??
- GREEN ?? ??: ? ???? 200/201 ?? ??? ?? ??? ?? ??
- REFACTOR ?? ??: ??? ?? ??, ?? ?? ?? ?? ?? ??? ??

## Phase 2: ? ?? + ?? ?? + ??/??? ??
- **목표 기간**: W2-W3
- **예상 소요 시간**: 4h
- **상태**: pending
- **목표**: Redis ? ?? ??? ??? job_status/page_status SSOT ??? ???? ???? ??/??? ??? ????.
- **완료 신호(게이트)**: job/page ?? ?? ??? ??/??? ??? SSOT ???? ???? ????.

### 산출물/수용 기준
- job_status: pending/processing/completed/failed/canceled ?? ?? ??
- page_status: success/partial/fail/canceled ?? ?? ??
- ?? ??? ??? ?? 3? ? ?? ?? ??

### 의존성
- Phase 1 API ?? ? ?? ?? ?? ??
- Redis ? ?? ??(???/???) ?? ??

### 주요 리스크
- ?? ?? ???? ???? ??? ??? ? ??
- ??? ?? ??? DB/??? ???? ???? ? ??

### 엣지 케이스 범위
- ACTIVE_JOB_ALREADY_EXISTS
- PAGE_RETRY_LIMIT_EXCEEDED
- QUEUE_CAPACITY_EXCEEDED
- ?? ? ?? terminal ??? ??? ??

### 개발 원칙 체크리스트 (RED/GREEN/REFACTOR)
- [ ] **RED**: ?? ??? ??: test_active_job_limit_per_user, test_page_retry_limit_three, test_cancel_job_transitions_to_canceled
- [ ] **GREEN**: ?? ??: Redis enqueue/dequeue, ?? ?? ???, cancel/retry API, ??? ???
- [ ] **REFACTOR**: ?? ?? ??? ???? ??? ???? ??? ?? ?? ??/???? ??? ???

### 품질 게이트 (차단형)
- **blocking**: True
- **stop_message**: ?? ?? ??? ?? ? ?? Phase ?? ??

#### TDD 준수
- [ ] RED ???? ?? ???? ?? ????.
- [ ] GREEN ???? ?? ???? ???? ?????.
- [ ] REFACTOR ???? ???? ??? ? ??? ????.

#### 빌드/테스트
- [ ] ?? ?? ?? ??? ??? ????.
- [ ] ?? ?? ?? ????? ????.

#### 코드 품질
- [ ] ?? ?? ??? ?? ?? ??? ????.
- [ ] ?? ??? ??(Frontend any ??, Backend Pydantic)? ????.

#### 보안/성능
- [ ] ???? ???? ??? .env ?? ??? ????.
- [ ] ??/???? ??? ?? ?? ??? ????.

#### 문서화
- [ ] ??/??? ?? ??? ??? ????.
- [ ] ???? ??? ?????.

#### 수동 검증
- [ ] ?? ??? ????? ?? ????.
- [ ] ?? ?? ? ?? ???? ?? ????.

### 품질 게이트 검증 명령(예시)
- `python scripts/plans_sync.py validate --input Plans.json`
- `pytest tests/api/test_jobs_status.py -q`
- `python scripts/plans_sync.py check --input Plans.json --output Plans.md`

### 예시 테스트 명령
- `pytest tests/api/test_jobs_status.py -q`
- `pytest tests/api/test_pages_retry.py -q`
- `pytest tests/worker/test_queue_flow.py -q`

### 예상 결과 예시
- RED ?? ??: ??? 4? ?? ??, ?? ??? ??? ??? ??
- GREEN ?? ??: ??? 3? ?? ? PAGE_RETRY_LIMIT_EXCEEDED ??
- REFACTOR ?? ??: ?? ?? ??? ??? ??, ?? ??? ?? ??

## Phase 3: OCR/?? ????? + Hard Gate ?? ?? + Fallback
- **목표 기간**: W3-W4
- **예상 소요 시간**: 4h
- **상태**: pending
- **목표**: OpenAI ?? ??? Gemini/Vision fallback ??, ??? ?? ??(Hard Gate)? ???? ????.
- **완료 신호(게이트)**: Hard Gate? fallback ??? ?? ?? ???? ?? ? fail-closed ??? ????.

### 산출물/수용 기준
- OCR ?? input_text_count ??
- ?? ?? output_text_count ??
- input_text_count == output_text_count ??
- OpenAI ?? ? fallback ?? ??

### 의존성
- Phase 2 ?/???? ???
- ?? API ?? ?/??/?? ?? ??

### 주요 리스크
- ?? API ?? ???? ??? ???? ??? ? ??
- fallback ?? ?? ? ?? ??? ??? ? ??

### 엣지 케이스 범위
- ?? API ????
- OCR ? ??
- fallback ?? ??
- FX_RATE_UNAVAILABLE? ?? fail-closed

### 개발 원칙 체크리스트 (RED/GREEN/REFACTOR)
- [ ] **RED**: ?? ??? ??: test_hard_gate_fails_on_text_loss, test_fallback_runs_when_openai_timeout, test_fail_closed_when_fx_rate_missing
- [ ] **GREEN**: ?? ??: OCR/?? ???, ??? ??, Hard Gate ?? ??, fallback ??
- [ ] **REFACTOR**: ?? API ????? ??? ????? ??, ???/?????? ?? ??, ?? ?? ???

### 품질 게이트 (차단형)
- **blocking**: True
- **stop_message**: ?? ?? ??? ?? ? ?? Phase ?? ??

#### TDD 준수
- [ ] RED ???? ?? ???? ?? ????.
- [ ] GREEN ???? ?? ???? ???? ?????.
- [ ] REFACTOR ???? ???? ??? ? ??? ????.

#### 빌드/테스트
- [ ] ?? ?? ?? ??? ??? ????.
- [ ] ?? ?? ?? ????? ????.

#### 코드 품질
- [ ] ?? ?? ??? ?? ?? ??? ????.
- [ ] ?? ??? ??(Frontend any ??, Backend Pydantic)? ????.

#### 보안/성능
- [ ] ???? ???? ??? .env ?? ??? ????.
- [ ] ??/???? ??? ?? ?? ??? ????.

#### 문서화
- [ ] ??/??? ?? ??? ??? ????.
- [ ] ???? ??? ?????.

#### 수동 검증
- [ ] ?? ??? ????? ?? ????.
- [ ] ?? ?? ? ?? ???? ?? ????.

### 품질 게이트 검증 명령(예시)
- `python scripts/plans_sync.py validate --input Plans.json`
- `pytest tests/worker/test_pipeline_hard_gate.py -q`
- `python scripts/plans_sync.py check --input Plans.json --output Plans.md`

### 예시 테스트 명령
- `pytest tests/worker/test_pipeline_hard_gate.py -q`
- `pytest tests/worker/test_fallback_strategy.py -q`
- `pytest tests/integration/test_cost_guard_fail_closed.py -q`

### 예상 결과 예시
- RED ?? ??: input/output ??? ???? ???? ??? ??
- GREEN ?? ??: ??? ??? ? failed ?? ? app_code ??
- REFACTOR ?? ??: fallback ?? ??? ?? ?? + ?? ??? ??

## Phase 4: ????/?? + ???? ??? + ?? ?? ??
- **목표 기간**: W4-W5
- **예상 소요 시간**: 4h
- **상태**: pending
- **목표**: ???? ??? ??(bbox_overflow, min_font_pt)? ?? ?? ?? ??? ???? ????.
- **완료 신호(게이트)**: ???? ???(bbox_overflow/min_font_pt)? ?? ?? ??? ?? ???? ????.

### 산출물/수용 기준
- bbox_overflow == 0
- min_font_pt >= 10
- ?? ????? ??? ?? ??(PAGE_NOT_EDITABLE ??)

### 의존성
- Phase 3 OCR/?? ??? ?? ??
- ?? ?? ??/?? ?? ??

### 주요 리스크
- ??/???? ?? ??? ?? ??? ??? ? ??
- ?? ?? ?? ?? ??? PAGE_NOT_EDITABLE ?? ?? ??

### 엣지 케이스 범위
- ?? ?? 9.9pt ???
- ??? ?? ??
- partial ?? ?? ?? ??
- ???? ?? ??

### 개발 원칙 체크리스트 (RED/GREEN/REFACTOR)
- [ ] **RED**: ?? ??? ??: test_layout_gate_rejects_overflow, test_layout_gate_rejects_too_small_font, test_page_edit_blocked_when_not_editable
- [ ] **GREEN**: ?? ??: ???? ???, ??? ?? ?? ??, ?? ???? ?? ??
- [ ] **REFACTOR**: ???? ?? ??? ?? ??? ???? ??? ??? ?? ??? ??

### 품질 게이트 (차단형)
- **blocking**: True
- **stop_message**: ?? ?? ??? ?? ? ?? Phase ?? ??

#### TDD 준수
- [ ] RED ???? ?? ???? ?? ????.
- [ ] GREEN ???? ?? ???? ???? ?????.
- [ ] REFACTOR ???? ???? ??? ? ??? ????.

#### 빌드/테스트
- [ ] ?? ?? ?? ??? ??? ????.
- [ ] ?? ?? ?? ????? ????.

#### 코드 품질
- [ ] ?? ?? ??? ?? ?? ??? ????.
- [ ] ?? ??? ??(Frontend any ??, Backend Pydantic)? ????.

#### 보안/성능
- [ ] ???? ???? ??? .env ?? ??? ????.
- [ ] ??/???? ??? ?? ?? ??? ????.

#### 문서화
- [ ] ??/??? ?? ??? ??? ????.
- [ ] ???? ??? ?????.

#### 수동 검증
- [ ] ?? ??? ????? ?? ????.
- [ ] ?? ?? ? ?? ???? ?? ????.

### 품질 게이트 검증 명령(예시)
- `python scripts/plans_sync.py validate --input Plans.json`
- `pytest tests/worker/test_layout_guard.py -q`
- `python scripts/plans_sync.py check --input Plans.json --output Plans.md`

### 예시 테스트 명령
- `pytest tests/worker/test_layout_guard.py -q`
- `pytest tests/api/test_pages_edit.py -q`
- `pytest tests/api/test_download_access.py -q`

### 예상 결과 예시
- RED ?? ??: bbox_overflow ?? ???? success? ???? ??
- GREEN ?? ??: overflow ?? font ?? ???? partial/fail? ??
- REFACTOR ?? ??: ??? ?? ???(?????) ?? ? ?? ??? ??

## Phase 5: ????? ??? ?? ?? ???
- **목표 기간**: W5
- **예상 소요 시간**: 3h
- **상태**: pending
- **목표**: Next.js App Router UI?? ???/???/?? ??/??/??? ??? ?? ? ?? ???? ????.
- **완료 신호(게이트)**: ?? UI ???? ?? ??? ??? ??? ?? ???? ????.

### 산출물/수용 기준
- ZIP ??? ? ??? ??
- ?? ???? ??? ?? ??
- ?? app_code ?? ??? ??? ??
- ???/??/?? ?? ??

### 의존성
- Phase 1~4 API ?? ? ??? ??
- ?? app_code ??? ?? ??? ??

### 주요 리스크
- ?? ?? ??? UI ???? ?? ??
- ??? ???/??? ???? ??? ??

### 엣지 케이스 범위
- ???? ?? ? ??? UI
- ??? ??? ???? ??
- ??? ?? ??
- ?? ?? ???? ?? ??

### 개발 원칙 체크리스트 (RED/GREEN/REFACTOR)
- [ ] **RED**: ?? ??? ??: upload.spec?? ??? ZIP ??, job-detail.spec?? ?? ?? ??, error-map.spec?? app_code ?? ??
- [ ] **GREEN**: ?? ??: ??? ?, ?? ?, ?? ??? ??, ???/?? ?? ???
- [ ] **REFACTOR**: ?? ??(React Query)? ?? UI ?? ??, ?? ???? ??, ??? ?? ??

### 품질 게이트 (차단형)
- **blocking**: True
- **stop_message**: ?? ?? ??? ?? ? ?? Phase ?? ??

#### TDD 준수
- [ ] RED ???? ?? ???? ?? ????.
- [ ] GREEN ???? ?? ???? ???? ?????.
- [ ] REFACTOR ???? ???? ??? ? ??? ????.

#### 빌드/테스트
- [ ] ?? ?? ?? ??? ??? ????.
- [ ] ?? ?? ?? ????? ????.

#### 코드 품질
- [ ] ?? ?? ??? ?? ?? ??? ????.
- [ ] ?? ??? ??(Frontend any ??, Backend Pydantic)? ????.

#### 보안/성능
- [ ] ???? ???? ??? .env ?? ??? ????.
- [ ] ??/???? ??? ?? ?? ??? ????.

#### 문서화
- [ ] ??/??? ?? ??? ??? ????.
- [ ] ???? ??? ?????.

#### 수동 검증
- [ ] ?? ??? ????? ?? ????.
- [ ] ?? ?? ? ?? ???? ?? ????.

### 품질 게이트 검증 명령(예시)
- `python scripts/plans_sync.py validate --input Plans.json`
- `npm run test -- src/features/jobs/job-detail.spec.ts`
- `python scripts/plans_sync.py check --input Plans.json --output Plans.md`

### 예시 테스트 명령
- `npm run test -- src/features/upload/upload.spec.ts`
- `npm run test -- src/features/jobs/job-detail.spec.ts`
- `npm run test -- src/features/common/error-map.spec.ts`

### 예상 결과 예시
- RED ?? ??: ??? ?? ????? ??? ?? ??? ??? ??
- GREEN ?? ??: app_code? ?? ??? ??? ??
- REFACTOR ?? ??: ??? ??? ?? ?? ?? UI ?? ??

## Phase 6: E2E ??? + KPI/?? ?? + Go/No-Go
- **목표 기간**: W6
- **예상 소요 시간**: 3h
- **상태**: pending
- **목표**: Playwright ?? ?? ?? E2E? KPI ?? ???? ??? ???? ????.
- **완료 신호(게이트)**: Hard/Soft/User Gate ?? ???? ???? Go/No-Go ???? ???? ????.

### 산출물/수용 기준
- E2E ??? -> ?? -> ???? ??
- success_rate >= 90%, usable_rate >= 95%
- ?? ?? ?? < 30?/???, ??? ???? 120?
- Soft Gate(??? 90%, ?? ????? 4/5)
- User Gate(CSAT >= 4.0, ??? ?? ?? >= 90%)

### 의존성
- Phase 1~5 ??? ?? ? ?? ?? ?? ?? ??
- ???/CSAT/cohort_100 ?? ??? ?? ??

### 주요 리스크
- flaky E2E? ??? ???? ??? ? ??
- ??? ??? ???? Soft/User Gate ?? ?? ??

### 엣지 케이스 범위
- OpenAI ?? ?? ? fallback ??
- ? ??? ? QUEUE_CAPACITY_EXCEEDED
- ?? ?? ?? ? COST_DAILY_LIMIT_EXCEEDED
- ?? ??/??? ??

### 개발 원칙 체크리스트 (RED/GREEN/REFACTOR)
- [ ] **RED**: ?? ??? ??: user-journey.e2e?? ???? ?? ??, metrics.test?? success_rate ?? ??, moderation.test?? ?? ?? ??
- [ ] **GREEN**: ?? ??: E2E ?? ??, KPI ?? ??, ??? ?? ??? ??
- [ ] **REFACTOR**: ??? ??? ?? ???, flaky ??(?? ?? ??), ??? ?? ???

### 품질 게이트 (차단형)
- **blocking**: True
- **stop_message**: ?? ?? ??? ?? ? ?? Phase ?? ??

#### TDD 준수
- [ ] RED ???? ?? ???? ?? ????.
- [ ] GREEN ???? ?? ???? ???? ?????.
- [ ] REFACTOR ???? ???? ??? ? ??? ????.

#### 빌드/테스트
- [ ] ?? ?? ?? ??? ??? ????.
- [ ] ?? ?? ?? ????? ????.

#### 코드 품질
- [ ] ?? ?? ??? ?? ?? ??? ????.
- [ ] ?? ??? ??(Frontend any ??, Backend Pydantic)? ????.

#### 보안/성능
- [ ] ???? ???? ??? .env ?? ??? ????.
- [ ] ??/???? ??? ?? ?? ??? ????.

#### 문서화
- [ ] ??/??? ?? ??? ??? ????.
- [ ] ???? ??? ?????.

#### 수동 검증
- [ ] ?? ??? ????? ?? ????.
- [ ] ?? ?? ? ?? ???? ?? ????.

### 품질 게이트 검증 명령(예시)
- `python scripts/plans_sync.py validate --input Plans.json`
- `npm run test:e2e -- tests/e2e/user-journey.spec.ts`
- `python scripts/plans_sync.py check --input Plans.json --output Plans.md`

### 예시 테스트 명령
- `npm run test:e2e -- tests/e2e/user-journey.spec.ts`
- `pytest tests/integration/test_metrics_kpi.py -q`
- `pytest tests/integration/test_moderation_flow.py -q`

### 예상 결과 예시
- RED ?? ??: E2E ?? ?? ?? ?? ?? KPI ?? ?? ??
- GREEN ?? ??: Hard/Soft/User Gate ?? ??? ??? ??
- REFACTOR ?? ??: ?? ??? ?? + ??? ??? ??

### 비고
- [???] ??? ?? ??, CSAT/cohort_100 ?? ??? PRD? ?? ?? ??? ?? ?? ?? ??.

## 4. 의사결정 로그
- **결정**: ??? ?? ??: ?? PR? ?? RED ??? ??? ???? ???.
- **근거**: ???? ??? ??? ???? PRD ?? ??? ?? ??? ???? ??.
- **결정**: Frontend ?? ??? ??? Vitest? ?? ????.
- **근거**: ???? ??? ?? ??? ?? Vite/TS ?? ??? ?? ????? ?? ??? package.json ?? ? ?????. ?? ?? ??.
- **결정**: ?? ??? PRD SSOT(job_status/page_status) ? ??? ????.
- **근거**: KPI ??? ?? ?? ???? ???? UI/API/DB ???? ???? ??.
- **결정**: Hard Gate ??? fail-open? ?? fail-closed? ????.
- **근거**: ?? ??(?? ?? ??, ???? ??)? MVP ?? ???? ???? ??.
- **결정**: OpenAI? ?? ??? ???? Gemini/Vision? fallback?? ????.
- **근거**: AGENTS.md ?? ??? PRD ???? ??? ??? ???? ??.

## 5. 검증 계획
- Phase 1 ?? ??(??): pytest tests/api/test_auth.py -q && pytest tests/api/test_jobs_create.py -q && pytest tests/api/test_error_app_codes.py -q
- Phase 2 ?? ??(??): pytest tests/api/test_jobs_status.py -q && pytest tests/api/test_pages_retry.py -q && pytest tests/worker/test_queue_flow.py -q
- Phase 3 ?? ??(??): pytest tests/worker/test_pipeline_hard_gate.py -q && pytest tests/worker/test_fallback_strategy.py -q && pytest tests/integration/test_cost_guard_fail_closed.py -q
- Phase 4 ?? ??(??): pytest tests/worker/test_layout_guard.py -q && pytest tests/api/test_pages_edit.py -q && pytest tests/api/test_download_access.py -q
- Phase 5 ?? ??(??): npm run test -- src/features/upload/upload.spec.ts && npm run test -- src/features/jobs/job-detail.spec.ts && npm run test -- src/features/common/error-map.spec.ts
- Phase 6 ?? ??(??): npm run test:e2e -- tests/e2e/user-journey.spec.ts && pytest tests/integration/test_metrics_kpi.py -q && pytest tests/integration/test_moderation_flow.py -q
- ??? ??? ?? ??(??): Hard Gate(input_text_count == output_text_count, bbox_overflow == 0, min_font_pt >= 10) ?? ??? + Soft/User Gate ?? ?? ? Go/No-Go ??

## 6. 리스크 평가
| 리스크 | 확률 | 영향 | 완화 전략 |
|---|---|---|---|
| ?? ?? ?? ???? API ??? ??? ? ?? | medium | high | W1 ??? ?? ?? ??? ???? ?? ? app_code/??? ??? ?? ????. |
| ?? ?? ???? ???? ??? ??? ? ?? | high | high | ???? ??? ?? ??? ???? ?? ???? ?? ???? ?? ????. |
| ?? API ?? ???? ??? ???? ??? ? ?? | high | medium | ?? ???? ?? ??? ???? fallback ??? ?? ?? ??? ????. |
| fallback ?? ?? ? ?? ??? ??? ? ?? | medium | high | ?? ?? ??? fail-closed ??? ???? ?? ???? ???? ????. |
| ??/???? ?? ??? ?? ??? ??? ? ?? | medium | medium | ???? ???? ??? ???? ???? ???? ?? ? ?? ???? ?????. |
| ?? ?? ??? UI ???? ?? ?? | medium | medium | API ?? ?? PR? ??? ?? ??? ????? ????? ?? ???? ????. |
| flaky E2E? ??? ???? ??? ? ?? | high | high | ???? ??? ???? ??? ??/?? ??? ??? ??? ??? ?? ????. |
| ??? ??? ???? Soft/User Gate ?? ?? ?? | medium | high | ??? ? cohort_100 ?? ??? ?? ???? ?? ??? ???? ????. |

## 7. 롤백 전략
### Phase 1
- **트리거**: ??/??? API ??? PRD ?? ??? ?????? app_code ??? ??? ??
- **복구 목표**: Phase 0 ?? ?? ?? ??
- **롤백 단계**:
- Phase 1?? ??? API ?? ?? ??? ?? ??? ????.
- Idempotency ?? ???? ??? ??? ?? ??? ????.
- ?? ? validate/render/check? ??? ?? ???? ????.

### Phase 2
- **트리거**: ?? ??/??? ???? ?? ??? ????? ???? ??
- **복구 목표**: Phase 1 ?? ??
- **롤백 단계**:
- ???? ???? ???? ?? ?? ?? ???? ????.
- ???/?? ??? ?? ?? ???? ????.
- ?? ?? ?? ??? ??? ???? ?? ??? ????.

### Phase 3
- **트리거**: OCR/?? fallback ?? ? ??? ?? ??? ???? ???? ??
- **복구 목표**: Phase 2 ?? ??
- **롤백 단계**:
- ?? fallback ?? ??? ???? ?? ??? ?????.
- ?? ?? ??? fail-closed ??? ????? ????.
- Hard Gate ??? ?? ???? ?????.

### Phase 4
- **트리거**: ???? ?? ?? ???? ?? ??? ??? ???? ??
- **복구 목표**: Phase 3 ?? ??
- **롤백 단계**:
- ???? ??? ? ?? ??? ?? ????? ????.
- ?? ?? ?? ??? ?? ???? ????.
- ???? ?? ???? ?? ?? ??? ?????.

### Phase 5
- **트리거**: ??? ?? ? ?? ??? ????? ??? ???? ??
- **복구 목표**: Phase 4 ?? ??
- **롤백 단계**:
- ?? UI ?? ??/?? ?? ??? ?? ??? ??? ????.
- ?? ?? ??? ??? ?? ?? ?? ??????.
- ?? ??? ?? ?? ???? ?????.

### Phase 6
- **트리거**: E2E ??? ?? KPI ??? ?? ???? ?? ??? ???? ??
- **복구 목표**: Phase 5 ?? ??
- **롤백 단계**:
- ?? ??? ??? ?????? ?? ?? ?? ???? ????.
- ?? ??(??/??/???)? ??? ?? ?? ???? ????.
- Go/No-Go ??? ???? ?? ?? ?? ???? ?????.

## 8. 진행률 추적
- **overall_progress_percent**: 0%

### Phase 상태
- Phase 1: status=pending, progress=0%
- Phase 2: status=pending, progress=0%
- Phase 3: status=pending, progress=0%
- Phase 4: status=pending, progress=0%
- Phase 5: status=pending, progress=0%
- Phase 6: status=pending, progress=0%

### 시간 추적
| Phase | Estimated | Actual | Variance |
|---|---:|---:|---:|
| 1 | 4 | - | - |
| 2 | 4 | - | - |
| 3 | 4 | - | - |
| 4 | 4 | - | - |
| 5 | 3 | - | - |
| 6 | 3 | - | - |

### 노트/학습
- ?? ???? ?? ??/??? ??? ?? ?? ???? ??? ??? ???? ????.

### 블로커
- (없음)
