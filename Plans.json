{
  "1_Purpose": {
    "main_objective": "PRD? AGENTS.md? ???? OCR-??-????-?? ????? MVP? ????, ?? ??? ??? ?? ???? ???? ???? ?? 30? ? ??? ??? ?? ??? ??? ????.",
    "hard_gate_definition": "Hard Gate? ?? ?? ??? input_text_count == output_text_count, bbox_overflow == 0, min_font_pt >= 10? ?? ???? ??? ????.",
    "tdd_execution_principle": "???? ??? ????, ? ??? RED(?? ???) -> GREEN(?? ?? ??) -> REFACTOR(?? ??, ??? ??) ??? ?? ??? ???.",
    "document_mode": "future_implementation_roadmap",
    "horizon_weeks": 6
  },
  "2_Testing_Strategy": {
    "frameworks": {
      "backend": "Pytest",
      "frontend": "Vitest + Testing Library",
      "e2e": "Playwright"
    },
    "command_policy": "example_only",
    "principles": [
      "?? ?? ?? ?? ?? ???? ?? ????, ?? ??? PRD ?? ??? 1:1? ????.",
      "???? Acceptance Criteria? Edge Case? ??? ????, ???/??/??? ???? ??? ??? ????.",
      "GREEN ?? ??? ??? ??? ?? ?? ??? ????, ?? ?? ??? ????.",
      "REFACTOR ????? Router-Service-CRUD-Schema ?? ??? ???? ?? ??? ????, ?? ??? ??? ???? ??.",
      "E2E ???? ??? ?? ??(??? -> ZIP ??? -> ??? ?? -> ?? ???? -> ?? ? ???/??)? ??? ?? ???? ????.",
      "?? ???? ??? ?? ??? ???? ???.",
      "?? ? ??? ??? ?? ?? ??? ??? ?? ???? ???? ?? ????."
    ],
    "test_commands": [
      "pytest tests/api/test_auth.py -q",
      "pytest tests/api/test_jobs_create.py -q",
      "pytest tests/worker/test_pipeline_hard_gate.py -q",
      "pytest tests/api/test_pages_retry.py -q",
      "pytest tests/api/test_error_app_codes.py -q",
      "pytest tests/integration/test_r2_storage.py -q",
      "pytest tests/integration/test_metrics_kpi.py -q",
      "npm run test -- src/features/upload/upload.spec.ts",
      "npm run test -- src/features/jobs/job-detail.spec.ts",
      "npm run test:e2e -- tests/e2e/user-journey.spec.ts"
    ],
    "temporary_assumptions": [
      "[???] ?? ???? package.json/??? ?? ??? ???? ?? Frontend ?? ??? ??? Vitest? ?? ????. ?? ?? ??.",
      "[???] ??? ?? ?? ??(?? ?, ??? ??)? PRD? ?? ??? ?? ??? ??? ? ?? ?? 90% ??? ????. ?? ?? ??."
    ]
  },
  "3_Progress": [
    {
      "phase_id": 1,
      "feature": "Auth + Job ?? API ?? (Idempotency ??)",
      "details": "????/???/?? ??, ZIP ??? ? ?? ??, Idempotency-Key ?? ??? ??? ??? ?? ????.",
      "target_window": "W1",
      "estimated_hours": 4,
      "status": "pending",
      "dependencies": [
        "?? ?? ??? ? ?? ???? ?? ??",
        "??/?? ?? ??(PRD, AGENTS) ??"
      ],
      "risks": [
        "?? ?? ?? ???? API ??? ??? ? ??",
        "Idempotency ? ?? ?? ???? ??? ??? ??? ? ??"
      ],
      "exit_signal": "Auth ?? ??? Jobs ?? API ??? ?? ??? ???? ???? app_code ??? ?????.",
      "acceptance_criteria_mapping": [
        "Auth ??? ?? ??(signup/login/refresh/logout) ??",
        "ZIP ??? -> jobs/pages ?? ??? ??",
        "?? API Idempotency-Key ??(?? ????? ??)"
      ],
      "edge_case_coverage": [
        "UNSUPPORTED_FILE_TYPE",
        "ARCHIVE_PARSE_FAILED",
        "MAX_PAGES_EXCEEDED",
        "IDEMPOTENCY_IN_PROGRESS"
      ],
      "checklist": [
        {
          "step": "RED",
          "desc": "?? ??? ??: test_create_job_requires_idempotency_key, test_upload_zip_rejects_unsupported_type, test_upload_zip_rejects_corrupted_archive",
          "done": false
        },
        {
          "step": "GREEN",
          "desc": "?? ??: POST /jobs, ZIP ??? ??, jobs/pages ??, app_code ?? ??? ??? ??? ??",
          "done": false
        },
        {
          "step": "REFACTOR",
          "desc": "Router-Service-CRUD-Schema ?? ??, ?? ?? ?? ???, ?? ?? ?? ??(??? ??)",
          "done": false
        }
      ],
      "quality_gate": {
        "blocking": true,
        "stop_message": "?? ?? ??? ?? ? ?? Phase ?? ??",
        "tdd_compliance": [
          {
            "item": "RED ???? ?? ???? ?? ????.",
            "done": false
          },
          {
            "item": "GREEN ???? ?? ???? ???? ?????.",
            "done": false
          },
          {
            "item": "REFACTOR ???? ???? ??? ? ??? ????.",
            "done": false
          }
        ],
        "build_and_tests": [
          {
            "item": "?? ?? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "?? ?? ?? ????? ????.",
            "done": false
          }
        ],
        "code_quality": [
          {
            "item": "?? ?? ??? ?? ?? ??? ????.",
            "done": false
          },
          {
            "item": "?? ??? ??(Frontend any ??, Backend Pydantic)? ????.",
            "done": false
          }
        ],
        "security_and_performance": [
          {
            "item": "???? ???? ??? .env ?? ??? ????.",
            "done": false
          },
          {
            "item": "??/???? ??? ?? ?? ??? ????.",
            "done": false
          }
        ],
        "documentation": [
          {
            "item": "??/??? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "???? ??? ?????.",
            "done": false
          }
        ],
        "manual_testing": [
          {
            "item": "?? ??? ????? ?? ????.",
            "done": false
          },
          {
            "item": "?? ?? ? ?? ???? ?? ????.",
            "done": false
          }
        ],
        "validation_commands": [
          "python scripts/plans_sync.py validate --input Plans.json",
          "pytest tests/api/test_auth.py -q",
          "python scripts/plans_sync.py check --input Plans.json --output Plans.md"
        ]
      },
      "test_commands": [
        "pytest tests/api/test_auth.py -q",
        "pytest tests/api/test_jobs_create.py -q",
        "pytest tests/api/test_error_app_codes.py -q"
      ],
      "result_examples": [
        "RED ?? ??: test_create_job_requires_idempotency_key ??(400/422 ???)? ??",
        "GREEN ?? ??: ? ???? 200/201 ?? ??? ?? ??? ?? ??",
        "REFACTOR ?? ??: ??? ?? ??, ?? ?? ?? ?? ?? ??? ??"
      ]
    },
    {
      "phase_id": 2,
      "feature": "? ?? + ?? ?? + ??/??? ??",
      "details": "Redis ? ?? ??? ??? job_status/page_status SSOT ??? ???? ???? ??/??? ??? ????.",
      "target_window": "W2-W3",
      "estimated_hours": 4,
      "status": "pending",
      "dependencies": [
        "Phase 1 API ?? ? ?? ?? ?? ??",
        "Redis ? ?? ??(???/???) ?? ??"
      ],
      "risks": [
        "?? ?? ???? ???? ??? ??? ? ??",
        "??? ?? ??? DB/??? ???? ???? ? ??"
      ],
      "exit_signal": "job/page ?? ?? ??? ??/??? ??? SSOT ???? ???? ????.",
      "acceptance_criteria_mapping": [
        "job_status: pending/processing/completed/failed/canceled ?? ?? ??",
        "page_status: success/partial/fail/canceled ?? ?? ??",
        "?? ??? ??? ?? 3? ? ?? ?? ??"
      ],
      "edge_case_coverage": [
        "ACTIVE_JOB_ALREADY_EXISTS",
        "PAGE_RETRY_LIMIT_EXCEEDED",
        "QUEUE_CAPACITY_EXCEEDED",
        "?? ? ?? terminal ??? ??? ??"
      ],
      "checklist": [
        {
          "step": "RED",
          "desc": "?? ??? ??: test_active_job_limit_per_user, test_page_retry_limit_three, test_cancel_job_transitions_to_canceled",
          "done": false
        },
        {
          "step": "GREEN",
          "desc": "?? ??: Redis enqueue/dequeue, ?? ?? ???, cancel/retry API, ??? ???",
          "done": false
        },
        {
          "step": "REFACTOR",
          "desc": "?? ?? ??? ???? ??? ???? ??? ?? ?? ??/???? ??? ???",
          "done": false
        }
      ],
      "quality_gate": {
        "blocking": true,
        "stop_message": "?? ?? ??? ?? ? ?? Phase ?? ??",
        "tdd_compliance": [
          {
            "item": "RED ???? ?? ???? ?? ????.",
            "done": false
          },
          {
            "item": "GREEN ???? ?? ???? ???? ?????.",
            "done": false
          },
          {
            "item": "REFACTOR ???? ???? ??? ? ??? ????.",
            "done": false
          }
        ],
        "build_and_tests": [
          {
            "item": "?? ?? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "?? ?? ?? ????? ????.",
            "done": false
          }
        ],
        "code_quality": [
          {
            "item": "?? ?? ??? ?? ?? ??? ????.",
            "done": false
          },
          {
            "item": "?? ??? ??(Frontend any ??, Backend Pydantic)? ????.",
            "done": false
          }
        ],
        "security_and_performance": [
          {
            "item": "???? ???? ??? .env ?? ??? ????.",
            "done": false
          },
          {
            "item": "??/???? ??? ?? ?? ??? ????.",
            "done": false
          }
        ],
        "documentation": [
          {
            "item": "??/??? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "???? ??? ?????.",
            "done": false
          }
        ],
        "manual_testing": [
          {
            "item": "?? ??? ????? ?? ????.",
            "done": false
          },
          {
            "item": "?? ?? ? ?? ???? ?? ????.",
            "done": false
          }
        ],
        "validation_commands": [
          "python scripts/plans_sync.py validate --input Plans.json",
          "pytest tests/api/test_jobs_status.py -q",
          "python scripts/plans_sync.py check --input Plans.json --output Plans.md"
        ]
      },
      "test_commands": [
        "pytest tests/api/test_jobs_status.py -q",
        "pytest tests/api/test_pages_retry.py -q",
        "pytest tests/worker/test_queue_flow.py -q"
      ],
      "result_examples": [
        "RED ?? ??: ??? 4? ?? ??, ?? ??? ??? ??? ??",
        "GREEN ?? ??: ??? 3? ?? ? PAGE_RETRY_LIMIT_EXCEEDED ??",
        "REFACTOR ?? ??: ?? ?? ??? ??? ??, ?? ??? ?? ??"
      ]
    },
    {
      "phase_id": 3,
      "feature": "OCR/?? ????? + Hard Gate ?? ?? + Fallback",
      "details": "OpenAI ?? ??? Gemini/Vision fallback ??, ??? ?? ??(Hard Gate)? ???? ????.",
      "target_window": "W3-W4",
      "estimated_hours": 4,
      "status": "pending",
      "dependencies": [
        "Phase 2 ?/???? ???",
        "?? API ?? ?/??/?? ?? ??"
      ],
      "risks": [
        "?? API ?? ???? ??? ???? ??? ? ??",
        "fallback ?? ?? ? ?? ??? ??? ? ??"
      ],
      "exit_signal": "Hard Gate? fallback ??? ?? ?? ???? ?? ? fail-closed ??? ????.",
      "acceptance_criteria_mapping": [
        "OCR ?? input_text_count ??",
        "?? ?? output_text_count ??",
        "input_text_count == output_text_count ??",
        "OpenAI ?? ? fallback ?? ??"
      ],
      "edge_case_coverage": [
        "?? API ????",
        "OCR ? ??",
        "fallback ?? ??",
        "FX_RATE_UNAVAILABLE? ?? fail-closed"
      ],
      "checklist": [
        {
          "step": "RED",
          "desc": "?? ??? ??: test_hard_gate_fails_on_text_loss, test_fallback_runs_when_openai_timeout, test_fail_closed_when_fx_rate_missing",
          "done": false
        },
        {
          "step": "GREEN",
          "desc": "?? ??: OCR/?? ???, ??? ??, Hard Gate ?? ??, fallback ??",
          "done": false
        },
        {
          "step": "REFACTOR",
          "desc": "?? API ????? ??? ????? ??, ???/?????? ?? ??, ?? ?? ???",
          "done": false
        }
      ],
      "quality_gate": {
        "blocking": true,
        "stop_message": "?? ?? ??? ?? ? ?? Phase ?? ??",
        "tdd_compliance": [
          {
            "item": "RED ???? ?? ???? ?? ????.",
            "done": false
          },
          {
            "item": "GREEN ???? ?? ???? ???? ?????.",
            "done": false
          },
          {
            "item": "REFACTOR ???? ???? ??? ? ??? ????.",
            "done": false
          }
        ],
        "build_and_tests": [
          {
            "item": "?? ?? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "?? ?? ?? ????? ????.",
            "done": false
          }
        ],
        "code_quality": [
          {
            "item": "?? ?? ??? ?? ?? ??? ????.",
            "done": false
          },
          {
            "item": "?? ??? ??(Frontend any ??, Backend Pydantic)? ????.",
            "done": false
          }
        ],
        "security_and_performance": [
          {
            "item": "???? ???? ??? .env ?? ??? ????.",
            "done": false
          },
          {
            "item": "??/???? ??? ?? ?? ??? ????.",
            "done": false
          }
        ],
        "documentation": [
          {
            "item": "??/??? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "???? ??? ?????.",
            "done": false
          }
        ],
        "manual_testing": [
          {
            "item": "?? ??? ????? ?? ????.",
            "done": false
          },
          {
            "item": "?? ?? ? ?? ???? ?? ????.",
            "done": false
          }
        ],
        "validation_commands": [
          "python scripts/plans_sync.py validate --input Plans.json",
          "pytest tests/worker/test_pipeline_hard_gate.py -q",
          "python scripts/plans_sync.py check --input Plans.json --output Plans.md"
        ]
      },
      "test_commands": [
        "pytest tests/worker/test_pipeline_hard_gate.py -q",
        "pytest tests/worker/test_fallback_strategy.py -q",
        "pytest tests/integration/test_cost_guard_fail_closed.py -q"
      ],
      "result_examples": [
        "RED ?? ??: input/output ??? ???? ???? ??? ??",
        "GREEN ?? ??: ??? ??? ? failed ?? ? app_code ??",
        "REFACTOR ?? ??: fallback ?? ??? ?? ?? + ?? ??? ??"
      ]
    },
    {
      "phase_id": 4,
      "feature": "????/?? + ???? ??? + ?? ?? ??",
      "details": "???? ??? ??(bbox_overflow, min_font_pt)? ?? ?? ?? ??? ???? ????.",
      "target_window": "W4-W5",
      "estimated_hours": 4,
      "status": "pending",
      "dependencies": [
        "Phase 3 OCR/?? ??? ?? ??",
        "?? ?? ??/?? ?? ??"
      ],
      "risks": [
        "??/???? ?? ??? ?? ??? ??? ? ??",
        "?? ?? ?? ?? ??? PAGE_NOT_EDITABLE ?? ?? ??"
      ],
      "exit_signal": "???? ???(bbox_overflow/min_font_pt)? ?? ?? ??? ?? ???? ????.",
      "acceptance_criteria_mapping": [
        "bbox_overflow == 0",
        "min_font_pt >= 10",
        "?? ????? ??? ?? ??(PAGE_NOT_EDITABLE ??)"
      ],
      "edge_case_coverage": [
        "?? ?? 9.9pt ???",
        "??? ?? ??",
        "partial ?? ?? ?? ??",
        "???? ?? ??"
      ],
      "checklist": [
        {
          "step": "RED",
          "desc": "?? ??? ??: test_layout_gate_rejects_overflow, test_layout_gate_rejects_too_small_font, test_page_edit_blocked_when_not_editable",
          "done": false
        },
        {
          "step": "GREEN",
          "desc": "?? ??: ???? ???, ??? ?? ?? ??, ?? ???? ?? ??",
          "done": false
        },
        {
          "step": "REFACTOR",
          "desc": "???? ?? ??? ?? ??? ???? ??? ??? ?? ??? ??",
          "done": false
        }
      ],
      "quality_gate": {
        "blocking": true,
        "stop_message": "?? ?? ??? ?? ? ?? Phase ?? ??",
        "tdd_compliance": [
          {
            "item": "RED ???? ?? ???? ?? ????.",
            "done": false
          },
          {
            "item": "GREEN ???? ?? ???? ???? ?????.",
            "done": false
          },
          {
            "item": "REFACTOR ???? ???? ??? ? ??? ????.",
            "done": false
          }
        ],
        "build_and_tests": [
          {
            "item": "?? ?? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "?? ?? ?? ????? ????.",
            "done": false
          }
        ],
        "code_quality": [
          {
            "item": "?? ?? ??? ?? ?? ??? ????.",
            "done": false
          },
          {
            "item": "?? ??? ??(Frontend any ??, Backend Pydantic)? ????.",
            "done": false
          }
        ],
        "security_and_performance": [
          {
            "item": "???? ???? ??? .env ?? ??? ????.",
            "done": false
          },
          {
            "item": "??/???? ??? ?? ?? ??? ????.",
            "done": false
          }
        ],
        "documentation": [
          {
            "item": "??/??? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "???? ??? ?????.",
            "done": false
          }
        ],
        "manual_testing": [
          {
            "item": "?? ??? ????? ?? ????.",
            "done": false
          },
          {
            "item": "?? ?? ? ?? ???? ?? ????.",
            "done": false
          }
        ],
        "validation_commands": [
          "python scripts/plans_sync.py validate --input Plans.json",
          "pytest tests/worker/test_layout_guard.py -q",
          "python scripts/plans_sync.py check --input Plans.json --output Plans.md"
        ]
      },
      "test_commands": [
        "pytest tests/worker/test_layout_guard.py -q",
        "pytest tests/api/test_pages_edit.py -q",
        "pytest tests/api/test_download_access.py -q"
      ],
      "result_examples": [
        "RED ?? ??: bbox_overflow ?? ???? success? ???? ??",
        "GREEN ?? ??: overflow ?? font ?? ???? partial/fail? ??",
        "REFACTOR ?? ??: ??? ?? ???(?????) ?? ? ?? ??? ??"
      ]
    },
    {
      "phase_id": 5,
      "feature": "????? ??? ?? ?? ???",
      "details": "Next.js App Router UI?? ???/???/?? ??/??/??? ??? ?? ? ?? ???? ????.",
      "target_window": "W5",
      "estimated_hours": 3,
      "status": "pending",
      "dependencies": [
        "Phase 1~4 API ?? ? ??? ??",
        "?? app_code ??? ?? ??? ??"
      ],
      "risks": [
        "?? ?? ??? UI ???? ?? ??",
        "??? ???/??? ???? ??? ??"
      ],
      "exit_signal": "?? UI ???? ?? ??? ??? ??? ?? ???? ????.",
      "acceptance_criteria_mapping": [
        "ZIP ??? ? ??? ??",
        "?? ???? ??? ?? ??",
        "?? app_code ?? ??? ??? ??",
        "???/??/?? ?? ??"
      ],
      "edge_case_coverage": [
        "???? ?? ? ??? UI",
        "??? ??? ???? ??",
        "??? ?? ??",
        "?? ?? ???? ?? ??"
      ],
      "checklist": [
        {
          "step": "RED",
          "desc": "?? ??? ??: upload.spec?? ??? ZIP ??, job-detail.spec?? ?? ?? ??, error-map.spec?? app_code ?? ??",
          "done": false
        },
        {
          "step": "GREEN",
          "desc": "?? ??: ??? ?, ?? ?, ?? ??? ??, ???/?? ?? ???",
          "done": false
        },
        {
          "step": "REFACTOR",
          "desc": "?? ??(React Query)? ?? UI ?? ??, ?? ???? ??, ??? ?? ??",
          "done": false
        }
      ],
      "quality_gate": {
        "blocking": true,
        "stop_message": "?? ?? ??? ?? ? ?? Phase ?? ??",
        "tdd_compliance": [
          {
            "item": "RED ???? ?? ???? ?? ????.",
            "done": false
          },
          {
            "item": "GREEN ???? ?? ???? ???? ?????.",
            "done": false
          },
          {
            "item": "REFACTOR ???? ???? ??? ? ??? ????.",
            "done": false
          }
        ],
        "build_and_tests": [
          {
            "item": "?? ?? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "?? ?? ?? ????? ????.",
            "done": false
          }
        ],
        "code_quality": [
          {
            "item": "?? ?? ??? ?? ?? ??? ????.",
            "done": false
          },
          {
            "item": "?? ??? ??(Frontend any ??, Backend Pydantic)? ????.",
            "done": false
          }
        ],
        "security_and_performance": [
          {
            "item": "???? ???? ??? .env ?? ??? ????.",
            "done": false
          },
          {
            "item": "??/???? ??? ?? ?? ??? ????.",
            "done": false
          }
        ],
        "documentation": [
          {
            "item": "??/??? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "???? ??? ?????.",
            "done": false
          }
        ],
        "manual_testing": [
          {
            "item": "?? ??? ????? ?? ????.",
            "done": false
          },
          {
            "item": "?? ?? ? ?? ???? ?? ????.",
            "done": false
          }
        ],
        "validation_commands": [
          "python scripts/plans_sync.py validate --input Plans.json",
          "npm run test -- src/features/jobs/job-detail.spec.ts",
          "python scripts/plans_sync.py check --input Plans.json --output Plans.md"
        ]
      },
      "test_commands": [
        "npm run test -- src/features/upload/upload.spec.ts",
        "npm run test -- src/features/jobs/job-detail.spec.ts",
        "npm run test -- src/features/common/error-map.spec.ts"
      ],
      "result_examples": [
        "RED ?? ??: ??? ?? ????? ??? ?? ??? ??? ??",
        "GREEN ?? ??: app_code? ?? ??? ??? ??",
        "REFACTOR ?? ??: ??? ??? ?? ?? ?? UI ?? ??"
      ]
    },
    {
      "phase_id": 6,
      "feature": "E2E ??? + KPI/?? ?? + Go/No-Go",
      "details": "Playwright ?? ?? ?? E2E? KPI ?? ???? ??? ???? ????.",
      "target_window": "W6",
      "estimated_hours": 3,
      "status": "pending",
      "dependencies": [
        "Phase 1~5 ??? ?? ? ?? ?? ?? ?? ??",
        "???/CSAT/cohort_100 ?? ??? ?? ??"
      ],
      "risks": [
        "flaky E2E? ??? ???? ??? ? ??",
        "??? ??? ???? Soft/User Gate ?? ?? ??"
      ],
      "exit_signal": "Hard/Soft/User Gate ?? ???? ???? Go/No-Go ???? ???? ????.",
      "acceptance_criteria_mapping": [
        "E2E ??? -> ?? -> ???? ??",
        "success_rate >= 90%, usable_rate >= 95%",
        "?? ?? ?? < 30?/???, ??? ???? 120?",
        "Soft Gate(??? 90%, ?? ????? 4/5)",
        "User Gate(CSAT >= 4.0, ??? ?? ?? >= 90%)"
      ],
      "edge_case_coverage": [
        "OpenAI ?? ?? ? fallback ??",
        "? ??? ? QUEUE_CAPACITY_EXCEEDED",
        "?? ?? ?? ? COST_DAILY_LIMIT_EXCEEDED",
        "?? ??/??? ??"
      ],
      "checklist": [
        {
          "step": "RED",
          "desc": "?? ??? ??: user-journey.e2e?? ???? ?? ??, metrics.test?? success_rate ?? ??, moderation.test?? ?? ?? ??",
          "done": false
        },
        {
          "step": "GREEN",
          "desc": "?? ??: E2E ?? ??, KPI ?? ??, ??? ?? ??? ??",
          "done": false
        },
        {
          "step": "REFACTOR",
          "desc": "??? ??? ?? ???, flaky ??(?? ?? ??), ??? ?? ???",
          "done": false
        }
      ],
      "quality_gate": {
        "blocking": true,
        "stop_message": "?? ?? ??? ?? ? ?? Phase ?? ??",
        "tdd_compliance": [
          {
            "item": "RED ???? ?? ???? ?? ????.",
            "done": false
          },
          {
            "item": "GREEN ???? ?? ???? ???? ?????.",
            "done": false
          },
          {
            "item": "REFACTOR ???? ???? ??? ? ??? ????.",
            "done": false
          }
        ],
        "build_and_tests": [
          {
            "item": "?? ?? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "?? ?? ?? ????? ????.",
            "done": false
          }
        ],
        "code_quality": [
          {
            "item": "?? ?? ??? ?? ?? ??? ????.",
            "done": false
          },
          {
            "item": "?? ??? ??(Frontend any ??, Backend Pydantic)? ????.",
            "done": false
          }
        ],
        "security_and_performance": [
          {
            "item": "???? ???? ??? .env ?? ??? ????.",
            "done": false
          },
          {
            "item": "??/???? ??? ?? ?? ??? ????.",
            "done": false
          }
        ],
        "documentation": [
          {
            "item": "??/??? ?? ??? ??? ????.",
            "done": false
          },
          {
            "item": "???? ??? ?????.",
            "done": false
          }
        ],
        "manual_testing": [
          {
            "item": "?? ??? ????? ?? ????.",
            "done": false
          },
          {
            "item": "?? ?? ? ?? ???? ?? ????.",
            "done": false
          }
        ],
        "validation_commands": [
          "python scripts/plans_sync.py validate --input Plans.json",
          "npm run test:e2e -- tests/e2e/user-journey.spec.ts",
          "python scripts/plans_sync.py check --input Plans.json --output Plans.md"
        ]
      },
      "test_commands": [
        "npm run test:e2e -- tests/e2e/user-journey.spec.ts",
        "pytest tests/integration/test_metrics_kpi.py -q",
        "pytest tests/integration/test_moderation_flow.py -q"
      ],
      "result_examples": [
        "RED ?? ??: E2E ?? ?? ?? ?? ?? KPI ?? ?? ??",
        "GREEN ?? ??: Hard/Soft/User Gate ?? ??? ??? ??",
        "REFACTOR ?? ??: ?? ??? ?? + ??? ??? ??"
      ],
      "notes": [
        "[???] ??? ?? ??, CSAT/cohort_100 ?? ??? PRD? ?? ?? ??? ?? ?? ?? ??."
      ]
    }
  ],
  "4_Decision_Log": [
    {
      "decision": "??? ?? ??: ?? PR? ?? RED ??? ??? ???? ???.",
      "reason": "???? ??? ??? ???? PRD ?? ??? ?? ??? ???? ??."
    },
    {
      "decision": "Frontend ?? ??? ??? Vitest? ?? ????.",
      "reason": "???? ??? ?? ??? ?? Vite/TS ?? ??? ?? ????? ?? ??? package.json ?? ? ?????. ?? ?? ??."
    },
    {
      "decision": "?? ??? PRD SSOT(job_status/page_status) ? ??? ????.",
      "reason": "KPI ??? ?? ?? ???? ???? UI/API/DB ???? ???? ??."
    },
    {
      "decision": "Hard Gate ??? fail-open? ?? fail-closed? ????.",
      "reason": "?? ??(?? ?? ??, ???? ??)? MVP ?? ???? ???? ??."
    },
    {
      "decision": "OpenAI? ?? ??? ???? Gemini/Vision? fallback?? ????.",
      "reason": "AGENTS.md ?? ??? PRD ???? ??? ??? ???? ??."
    }
  ],
  "5_Validation": [
    "Phase 1 ?? ??(??): pytest tests/api/test_auth.py -q && pytest tests/api/test_jobs_create.py -q && pytest tests/api/test_error_app_codes.py -q",
    "Phase 2 ?? ??(??): pytest tests/api/test_jobs_status.py -q && pytest tests/api/test_pages_retry.py -q && pytest tests/worker/test_queue_flow.py -q",
    "Phase 3 ?? ??(??): pytest tests/worker/test_pipeline_hard_gate.py -q && pytest tests/worker/test_fallback_strategy.py -q && pytest tests/integration/test_cost_guard_fail_closed.py -q",
    "Phase 4 ?? ??(??): pytest tests/worker/test_layout_guard.py -q && pytest tests/api/test_pages_edit.py -q && pytest tests/api/test_download_access.py -q",
    "Phase 5 ?? ??(??): npm run test -- src/features/upload/upload.spec.ts && npm run test -- src/features/jobs/job-detail.spec.ts && npm run test -- src/features/common/error-map.spec.ts",
    "Phase 6 ?? ??(??): npm run test:e2e -- tests/e2e/user-journey.spec.ts && pytest tests/integration/test_metrics_kpi.py -q && pytest tests/integration/test_moderation_flow.py -q",
    "??? ??? ?? ??(??): Hard Gate(input_text_count == output_text_count, bbox_overflow == 0, min_font_pt >= 10) ?? ??? + Soft/User Gate ?? ?? ? Go/No-Go ??"
  ],
  "6_Risk_Assessment": [
    {
      "risk": "?? ?? ?? ???? API ??? ??? ? ??",
      "probability": "medium",
      "impact": "high",
      "mitigation_strategy": "W1 ??? ?? ?? ??? ???? ?? ? app_code/??? ??? ?? ????."
    },
    {
      "risk": "?? ?? ???? ???? ??? ??? ? ??",
      "probability": "high",
      "impact": "high",
      "mitigation_strategy": "???? ??? ?? ??? ???? ?? ???? ?? ???? ?? ????."
    },
    {
      "risk": "?? API ?? ???? ??? ???? ??? ? ??",
      "probability": "high",
      "impact": "medium",
      "mitigation_strategy": "?? ???? ?? ??? ???? fallback ??? ?? ?? ??? ????."
    },
    {
      "risk": "fallback ?? ?? ? ?? ??? ??? ? ??",
      "probability": "medium",
      "impact": "high",
      "mitigation_strategy": "?? ?? ??? fail-closed ??? ???? ?? ???? ???? ????."
    },
    {
      "risk": "??/???? ?? ??? ?? ??? ??? ? ??",
      "probability": "medium",
      "impact": "medium",
      "mitigation_strategy": "???? ???? ??? ???? ???? ???? ?? ? ?? ???? ?????."
    },
    {
      "risk": "?? ?? ??? UI ???? ?? ??",
      "probability": "medium",
      "impact": "medium",
      "mitigation_strategy": "API ?? ?? PR? ??? ?? ??? ????? ????? ?? ???? ????."
    },
    {
      "risk": "flaky E2E? ??? ???? ??? ? ??",
      "probability": "high",
      "impact": "high",
      "mitigation_strategy": "???? ??? ???? ??? ??/?? ??? ??? ??? ??? ?? ????."
    },
    {
      "risk": "??? ??? ???? Soft/User Gate ?? ?? ??",
      "probability": "medium",
      "impact": "high",
      "mitigation_strategy": "??? ? cohort_100 ?? ??? ?? ???? ?? ??? ???? ????."
    }
  ],
  "7_Rollback_Strategy": {
    "phase_rollbacks": [
      {
        "phase_id": 1,
        "trigger": "??/??? API ??? PRD ?? ??? ?????? app_code ??? ??? ??",
        "steps": [
          "Phase 1?? ??? API ?? ?? ??? ?? ??? ????.",
          "Idempotency ?? ???? ??? ??? ?? ??? ????.",
          "?? ? validate/render/check? ??? ?? ???? ????."
        ],
        "restore_target": "Phase 0 ?? ?? ?? ??"
      },
      {
        "phase_id": 2,
        "trigger": "?? ??/??? ???? ?? ??? ????? ???? ??",
        "steps": [
          "???? ???? ???? ?? ?? ?? ???? ????.",
          "???/?? ??? ?? ?? ???? ????.",
          "?? ?? ?? ??? ??? ???? ?? ??? ????."
        ],
        "restore_target": "Phase 1 ?? ??"
      },
      {
        "phase_id": 3,
        "trigger": "OCR/?? fallback ?? ? ??? ?? ??? ???? ???? ??",
        "steps": [
          "?? fallback ?? ??? ???? ?? ??? ?????.",
          "?? ?? ??? fail-closed ??? ????? ????.",
          "Hard Gate ??? ?? ???? ?????."
        ],
        "restore_target": "Phase 2 ?? ??"
      },
      {
        "phase_id": 4,
        "trigger": "???? ?? ?? ???? ?? ??? ??? ???? ??",
        "steps": [
          "???? ??? ? ?? ??? ?? ????? ????.",
          "?? ?? ?? ??? ?? ???? ????.",
          "???? ?? ???? ?? ?? ??? ?????."
        ],
        "restore_target": "Phase 3 ?? ??"
      },
      {
        "phase_id": 5,
        "trigger": "??? ?? ? ?? ??? ????? ??? ???? ??",
        "steps": [
          "?? UI ?? ??/?? ?? ??? ?? ??? ??? ????.",
          "?? ?? ??? ??? ?? ?? ?? ??????.",
          "?? ??? ?? ?? ???? ?????."
        ],
        "restore_target": "Phase 4 ?? ??"
      },
      {
        "phase_id": 6,
        "trigger": "E2E ??? ?? KPI ??? ?? ???? ?? ??? ???? ??",
        "steps": [
          "?? ??? ??? ?????? ?? ?? ?? ???? ????.",
          "?? ??(??/??/???)? ??? ?? ?? ???? ????.",
          "Go/No-Go ??? ???? ?? ?? ?? ???? ?????."
        ],
        "restore_target": "Phase 5 ?? ??"
      }
    ]
  },
  "8_Progress_Tracking": {
    "phase_status": [
      {
        "phase_id": 1,
        "status": "pending",
        "progress_percent": 0
      },
      {
        "phase_id": 2,
        "status": "pending",
        "progress_percent": 0
      },
      {
        "phase_id": 3,
        "status": "pending",
        "progress_percent": 0
      },
      {
        "phase_id": 4,
        "status": "pending",
        "progress_percent": 0
      },
      {
        "phase_id": 5,
        "status": "pending",
        "progress_percent": 0
      },
      {
        "phase_id": 6,
        "status": "pending",
        "progress_percent": 0
      }
    ],
    "overall_progress_percent": 0,
    "time_tracking": [
      {
        "phase_id": 1,
        "estimated_hours": 4,
        "actual_hours": null,
        "variance_hours": null
      },
      {
        "phase_id": 2,
        "estimated_hours": 4,
        "actual_hours": null,
        "variance_hours": null
      },
      {
        "phase_id": 3,
        "estimated_hours": 4,
        "actual_hours": null,
        "variance_hours": null
      },
      {
        "phase_id": 4,
        "estimated_hours": 4,
        "actual_hours": null,
        "variance_hours": null
      },
      {
        "phase_id": 5,
        "estimated_hours": 3,
        "actual_hours": null,
        "variance_hours": null
      },
      {
        "phase_id": 6,
        "estimated_hours": 3,
        "actual_hours": null,
        "variance_hours": null
      }
    ],
    "notes_and_learnings": [
      "?? ???? ?? ??/??? ??? ?? ?? ???? ??? ??? ???? ????."
    ],
    "blockers": []
  }
}
